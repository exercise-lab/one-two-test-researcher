digraph {
  rankdir = LR
  fontname = Helvetica
  label = "One-Two Test Experiment"
  labelloc = t
  node[label="" style=filled]

  // set order, last to first
  team_both_test1, vis_one_test1_t1, dia_one_test1_t1, ind_one_test1_t1, ind_both_test1

  // individual condition, both tests at the same time
  subgraph cluster_ind_both {
    label="Person1"
    ind_both_test1, ind_both_r2, ind_both_test2
  }
  ind_both_r2 -> ind_both_r2end[minlen=2]

  // team condition, both tests at the same time
  subgraph cluster_team_both {
    label="Person1\nPerson 2"
    team_both_test1, team_both_r2, team_both_test2
  }
  team_both_r2 -> team_both_r2end[minlen=1]

  // individual condition, one test at a time
  subgraph cluster_ind_one_t1 {
    label="Person1"
    ind_one_test1_t1, ind_one_r2_t1, ind_one_test2_t1
  }
  subgraph cluster_ind_one_t2 {
    label="Person1"
    ind_one_test1_t2, ind_one_r2_t2, ind_one_test2_t2
  }
  ind_one_r2_t1 -> ind_one_r2_t2 -> ind_one_r2end

  // diachronic condition, one test at a time
  subgraph cluster_dia_one_t1 {
    label="Person1"
    dia_one_test1_t1, dia_one_r2_t1, dia_one_test2_t1
  }
  subgraph cluster_dia_one_t2 {
    label="Person2"
    dia_one_test1_t2, dia_one_r2_t2, dia_one_test2_t2
  }
  dia_one_r2_t1 -> dia_one_r2_t2 -> dia_one_r2end

  // team condition, both tests visible
  subgraph cluster_vis_one_t1 {
    label="Person1"
    vis_one_test1_t1, vis_one_r2_t1, vis_one_test2_t1
  }
  subgraph cluster_vis_one_t2 {
    label="Person2"
    vis_one_test1_t2, vis_one_r2_t2, vis_one_test2_t2
  }
  vis_one_r2_t1 -> vis_one_r2_t2 -> vis_one_r2end
  vis_one_test2_t1[shape=square color="#bdbdbd"]

  // set shape for test 1
  vis_one_test1_t1, vis_one_test1_t2, ind_both_test1, vis_one_test1_t2, ind_one_test1_t1, ind_one_test1_t2, team_both_test1, dia_one_test1_t1, dia_one_test1_t2[shape=circle color="#8da0cb"]

  // set shape for test 2
  vis_one_test2_t2, ind_both_test2, ind_one_test2_t1, ind_one_test2_t1, ind_one_test2_t2, team_both_test2, dia_one_test2_t2[shape=square color="#66c2a5"]

  // invisible nodes
  vis_one_r2_t1, vis_one_r2_t2, vis_one_r2end, ind_one_v1_r2, ind_both_r2, ind_both_r2end, ind_one_r2_t1, ind_one_r2_t2, ind_one_r2end, dia_one_r2_t2, dia_one_r2_t1, dia_one_r2end, team_both_r2, team_both_r2end[width=0.2 height=0 style=invis shape=none]
  ind_one_test2_t1, dia_one_test2_t1[style=invis]
}
